(window.webpackJsonp=window.webpackJsonp||[]).push([[472],{1287:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[a("code",[t._v("Component")]),t._v(" 构造器用于创建自定义组件，接受一个 Object 类型的参数。")]),t._v(" "),a("h2",{attrs:{id:"参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[t._v("#")]),t._v(" 参数")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("定义段")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("是否必填")]),t._v(" "),a("th",[t._v("描述")]),t._v(" "),a("th",[t._v("最低版本")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("properties")]),t._v(" "),a("td",[t._v("Object Map")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("组件的对外属性，是属性名到属性设置的映射表")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("data")]),t._v(" "),a("td",[t._v("Object")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("组件的内部数据，和 properties 一同用于组件的模板渲染")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("observers")]),t._v(" "),a("td",[t._v("Object")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("组件数据字段监听器，用于监听 properties 和 data 的变化，参见 数据监听器")]),t._v(" "),a("td",[t._v("2.6.1")])]),t._v(" "),a("tr",[a("td",[t._v("methods")]),t._v(" "),a("td",[t._v("Object")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("组件的方法，包括事件响应函数和任意的自定义方法，关于事件响应函数的使用，参见 组件间通信与事件")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("behaviors")]),t._v(" "),a("td",[t._v("String Array")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("类似于 mixins 和 traits 的组件间代码复用机制，参见 behaviors")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("created")]),t._v(" "),a("td",[t._v("Function")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("组件生命周期函数-在组件实例刚刚被创建时执行，注意此时不能调用 setData )")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("attached")]),t._v(" "),a("td",[t._v("Function")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("组件生命周期函数-在组件实例进入页面节点树时执行)")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("ready")]),t._v(" "),a("td",[t._v("Function")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("组件生命周期函数-在组件布局完成后执行)")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("moved")]),t._v(" "),a("td",[t._v("Function")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("组件生命周期函数-在组件实例被移动到节点树另一个位置时执行)")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("detached")]),t._v(" "),a("td",[t._v("Function")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("组件生命周期函数-在组件实例被从页面节点树移除时执行)")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("relations")]),t._v(" "),a("td",[t._v("Object")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("组件间关系定义，参见 组件间关系")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("externalClasses")]),t._v(" "),a("td",[t._v("String Array")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("组件接受的外部样式类，参见 外部样式类")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("options")]),t._v(" "),a("td",[t._v("Object Map")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("一些选项(文档中介绍相关特性时会涉及具体的选项设置，这里暂不列举)")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("lifetimes")]),t._v(" "),a("td",[t._v("Object")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("组件生命周期声明对象，参见 组件生命周期")]),t._v(" "),a("td",[t._v("2.2.3")])]),t._v(" "),a("tr",[a("td",[t._v("pageLifetimes")]),t._v(" "),a("td",[t._v("Object")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("组件所在页面的生命周期声明对象，参见 组件生命周期")]),t._v(" "),a("td",[t._v("2.2.3")])]),t._v(" "),a("tr",[a("td",[t._v("definitionFilter")]),t._v(" "),a("td",[t._v("Function")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("定义段过滤器，用于自定义组件扩展，参见 自定义组件扩展")]),t._v(" "),a("td",[t._v("2.2.3")])])])]),t._v(" "),a("p",[t._v("生成的组件实例可以在组件的方法、生命周期函数和属性 "),a("code",[t._v("observer")]),t._v(" 中通过 "),a("code",[t._v("this")]),t._v(" 访问。组件包含一些通用属性和方法。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("属性名")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("is")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("组件的文件路径")])]),t._v(" "),a("tr",[a("td",[t._v("id")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("节点 id")])]),t._v(" "),a("tr",[a("td",[t._v("dataset")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("节点 dataset")])]),t._v(" "),a("tr",[a("td",[t._v("data")]),t._v(" "),a("td",[t._v("Object")]),t._v(" "),a("td",[t._v("组件数据，包括内部数据和属性值")])]),t._v(" "),a("tr",[a("td",[t._v("properties")]),t._v(" "),a("td",[t._v("Object")]),t._v(" "),a("td",[t._v("组件数据，包括内部数据和属性值(与 data 一致)")])])])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("方法名")]),t._v(" "),a("th",[t._v("参数")]),t._v(" "),a("th",[t._v("描述")]),t._v(" "),a("th",[t._v("最低版本")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("setData")]),t._v(" "),a("td",[t._v("Object newData")]),t._v(" "),a("td",[t._v("设置 data 并执行视图层渲染")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("hasBehavior")]),t._v(" "),a("td",[t._v("Object behavior")]),t._v(" "),a("td",[t._v("检查组件是否具有 behavior (检查时会递归检查被直接或间接引入的所有 behavior)")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("triggerEvent")]),t._v(" "),a("td",[t._v("String name, Object detail, Object options")]),t._v(" "),a("td",[t._v("触发事件，参见 组件间通信与事件")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("createSelectorQuery")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("创建一个 SelectorQuery 对象，选择器选取范围为这个组件实例内")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("createIntersectionObserver")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("创建一个 IntersectionObserver 对象，选择器选取范围为这个组件实例内")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("createMediaQueryObserver")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("创建一个 MediaQueryObserver 对象")]),t._v(" "),a("td",[t._v("2.11.1")])]),t._v(" "),a("tr",[a("td",[t._v("selectComponent")]),t._v(" "),a("td",[t._v("String selector")]),t._v(" "),a("td",[t._v("使用选择器选择组件实例节点，返回匹配到的第一个组件实例对象(会被 wx://component-export 影响)")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("selectAllComponents")]),t._v(" "),a("td",[t._v("String selector")]),t._v(" "),a("td",[t._v("使用选择器选择组件实例节点，返回匹配到的全部组件实例对象组成的数组(会被 wx://component-export 影响)")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("selectOwnerComponent")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("选取当前组件节点所在的组件实例(即组件的引用者)，返回它的组件实例对象(会被 wx://component-export 影响)")]),t._v(" "),a("td",[t._v("2.8.2")])]),t._v(" "),a("tr",[a("td",[t._v("getRelationNodes")]),t._v(" "),a("td",[t._v("String relationKey")]),t._v(" "),a("td",[t._v("获取这个关系所对应的所有关联节点，参见 组件间关系")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("groupSetData")]),t._v(" "),a("td",[t._v("Function callback")]),t._v(" "),a("td",[t._v("立刻执行 callback ，其中的多个 setData 之间不会触发界面绘制(只有某些特殊场景中需要，如用于在不同组件同时 setData 时进行界面绘制同步)")]),t._v(" "),a("td",[t._v("2.4.0")])]),t._v(" "),a("tr",[a("td",[t._v("getTabBar")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("返回当前页面的 custom-tab-bar 的组件实例，详见自定义 tabBar")]),t._v(" "),a("td",[t._v("2.6.2")])]),t._v(" "),a("tr",[a("td",[t._v("getPageId")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("返回页面标识符(一个字符串)，可以用来判断几个自定义组件实例是不是在同一个页面内")]),t._v(" "),a("td",[t._v("2.7.1")])]),t._v(" "),a("tr",[a("td",[t._v("animate")]),t._v(" "),a("td",[t._v("String selector, Array keyframes, Number duration, Function callback")]),t._v(" "),a("td",[t._v("执行关键帧动画，详见动画")]),t._v(" "),a("td",[t._v("2.9.0")])]),t._v(" "),a("tr",[a("td",[t._v("clearAnimation")]),t._v(" "),a("td",[t._v("String selector, Object options, Function callback")]),t._v(" "),a("td",[t._v("清除关键帧动画，详见动画")]),t._v(" "),a("td",[t._v("2.9.0")])]),t._v(" "),a("tr",[a("td",[t._v("setUpdatePerformanceListener")]),t._v(" "),a("td",[t._v("Object options, Function listener")]),t._v(" "),a("td",[t._v("清除关键帧动画，详见动画")]),t._v(" "),a("td",[t._v("2.12.0")])])])]),t._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[t._v("代码示例")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://developers.weixin.qq.com/s/GqVTnvmq7g1m",target:"_blank",rel:"noopener noreferrer"}},[t._v("在开发者工具中预览效果"),a("OutboundLink")],1)]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Component")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  behaviors"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 属性定义(详情参见下文)")]),t._v("\n  properties"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    myProperty"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 属性名")]),t._v("\n      type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    myProperty2"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 简化的定义方式")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  data"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 私有数据，可用于模板渲染")]),t._v("\n\n  lifetimes"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 生命周期函数，可以为函数，或一个在methods段中定义的方法名")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("attached")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("moved")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("detached")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  pageLifetimes"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 组件所在页面的生命周期函数")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("show")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hide")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  methods"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("onMyButtonTap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 更新属性和数据的方法与更新页面数据的方法类似")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 内部方法建议以下划线开头")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("_myPrivateMethod")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里将 data.A[0].B 设为 'myPrivateData'")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"A[0].B"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"myPrivateData"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("_propertyChange")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("newVal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oldVal")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br"),a("span",{staticClass:"line-number"},[t._v("35")]),a("br"),a("span",{staticClass:"line-number"},[t._v("36")]),a("br"),a("span",{staticClass:"line-number"},[t._v("37")]),a("br"),a("span",{staticClass:"line-number"},[t._v("38")]),a("br"),a("span",{staticClass:"line-number"},[t._v("39")]),a("br"),a("span",{staticClass:"line-number"},[t._v("40")]),a("br"),a("span",{staticClass:"line-number"},[t._v("41")]),a("br"),a("span",{staticClass:"line-number"},[t._v("42")]),a("br"),a("span",{staticClass:"line-number"},[t._v("43")]),a("br"),a("span",{staticClass:"line-number"},[t._v("44")]),a("br"),a("span",{staticClass:"line-number"},[t._v("45")]),a("br")])])]),t._v(" "),a("h2",{attrs:{id:"properties-定义"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#properties-定义"}},[t._v("#")]),t._v(" properties 定义")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("定义段")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("是否必填")]),t._v(" "),a("th",[t._v("描述")]),t._v(" "),a("th",[t._v("最低版本")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("type")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("是")]),t._v(" "),a("td",[t._v("属性的类型")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("optionalTypes")]),t._v(" "),a("td",[t._v("Array")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("属性的类型(可以指定多个)")]),t._v(" "),a("td",[t._v("2.6.5")])]),t._v(" "),a("tr",[a("td",[t._v("value")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("属性的初始值")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("observer")]),t._v(" "),a("td",[t._v("Function")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("属性值变化时的回调函数")]),t._v(" "),a("td")])])]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),a("p",[t._v("新版本基础库中不推荐使用 "),a("code",[t._v("observer")]),t._v(" 字段，而是使用 Component 构造器的 "),a("code",[t._v("observers")]),t._v(" 字段代替，它更加强大且性能更好。")])]),t._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[t._v("代码示例")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Component")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  properties"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    min"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Number"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    min"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Number"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("observer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("newVal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oldVal")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 属性值变化时执行")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    lastLeaf"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这个属性可以是 Number 、 String 、 Boolean 三种类型中的一种")]),t._v("\n      type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Number"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      optionalTypes"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br")])])]),t._v(" "),a("p",[t._v("属性的类型可以为 "),a("code",[t._v("String")]),t._v(" "),a("code",[t._v("Number")]),t._v(" "),a("code",[t._v("Boolean")]),t._v(" "),a("code",[t._v("Object")]),t._v(" "),a("code",[t._v("Array")]),t._v(" 其一，也可以为 "),a("code",[t._v("null")]),t._v(" 表示不限制类型。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("p",[t._v("多数情况下，属性最好指定一个确切的类型。这样，在 WXML 中以字面量指定属性值时，值可以获得一个确切的类型，如:")]),t._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("custom-comp")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("min")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("max")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("5"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("此时，由于自定义组件的对应属性被规定为 "),a("code",[t._v("Number")]),t._v(" 类型， min 和 max 会被赋值为 "),a("code",[t._v("1")]),t._v(" 和 "),a("code",[t._v("5")]),t._v(" ，而非 "),a("code",[t._v('"1"')]),t._v(" 和 "),a("code",[t._v('"5"')]),t._v(" ，即:")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("min "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("max "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])])]),t._v(" "),a("div",{staticClass:"custom-block info"},[a("p",{staticClass:"custom-block-title"},[t._v("相关信息")]),t._v(" "),a("p",[t._v("在 "),a("code",[t._v("properties")]),t._v(' 定义段中，属性名采用驼峰写法(propertyName)；在 wxml 中，指定属性值时则对应使用连字符写法(component-tag-name property-name="attr value")，应用于数据绑定时采用驼峰写法(attr="")。')])]),t._v(" "),a("h3",{attrs:{id:"bug-tips"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bug-tips"}},[t._v("#")]),t._v(" Bug & Tips")]),t._v(" "),a("ul",[a("li",[t._v("使用 "),a("code",[t._v("this.data")]),t._v(" 可以获取内部数据和属性值；但直接修改它不会将变更应用到界面上，应使用 setData 修改。")]),t._v(" "),a("li",[t._v("生命周期函数无法在组件方法中通过 "),a("code",[t._v("this")]),t._v(" 访问到。")]),t._v(" "),a("li",[t._v("属性名应避免以 "),a("code",[t._v("data")]),t._v(" 开头，即不要命名成 "),a("code",[t._v("dataXyz")]),t._v(" 这样的形式，因为在 WXML 中， "),a("code",[t._v('data-xyz=""')]),t._v(" 会被作为节点 dataset 来处理，而不是组件属性。")]),t._v(" "),a("li",[t._v("在一个组件的定义和使用时，组件的属性名和 data 字段相互间都不能冲突(尽管它们位于不同的定义段中)。")]),t._v(" "),a("li",[t._v("从基础库 2.0.9 开始，对象类型的属性和 data 字段中可以包含函数类型的子字段，即可以通过对象类型的属性字段来传递函数。低于这一版本的基础库不支持这一特性。")]),t._v(" "),a("li",[t._v("bug : 对于 type 为 Object 或 Array 的属性，如果通过该组件自身的 "),a("code",[t._v("this.setData")]),t._v(" 来改变属性值的一个子字段，则依旧会触发属性 observer ，且 observer 接收到的 "),a("code",[t._v("newVal")]),t._v(" 是变化的那个子字段的值，"),a("code",[t._v("oldVal")]),t._v(" 为空， "),a("code",[t._v("changedPath")]),t._v(" 包含子字段的字段名相关信息；目前推荐使用 "),a("code",[t._v("observers")]),t._v(" 定义段代替。")])])])}),[],!1,null,null,null);s.default=e.exports}}]);